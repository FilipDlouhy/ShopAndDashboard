{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fidlo\\\\Desktop\\\\ecomerence\\\\frontend\\\\src\\\\components\\\\PayForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { UserContext } from '../Context/UserContext';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PayForm() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    orderId\n  } = useContext(UserContext);\n\n  const validateCardNumber = number => {\n    //Check if the number contains only numeric value  \n    //and is of between 13 to 19 digits\n    const regex = new RegExp(\"^[0-9]{13,19}$\");\n\n    if (!regex.test(number)) {\n      return false;\n    }\n\n    return luhnCheck(number);\n  };\n\n  const luhnCheck = val => {\n    let checksum = 0; // running checksum total\n\n    let j = 1; // takes value of 1 or 2\n    // Process each digit one by one starting from the last\n\n    for (let i = val.length - 1; i >= 0; i--) {\n      let calc = 0; // Extract the next digit and multiply by 1 or 2 on alternative digits.\n\n      calc = Number(val.charAt(i)) * j; // If the result is in two digits add 1 to the checksum total\n\n      if (calc > 9) {\n        checksum = checksum + 1;\n        calc = calc - 10;\n      } // Add the units element to the checksum total\n\n\n      checksum = checksum + calc; // Switch the value of j\n\n      if (j == 1) {\n        j = 2;\n      } else {\n        j = 1;\n      }\n    } //Check if it is divisible by 10 or not.\n\n\n    return checksum % 10 == 0;\n  };\n\n  const [email, setEmail] = useState();\n  const [cardNumber, setCardNumber] = useState();\n  const [expireDateOfCard, setExpireDateOfCard] = useState();\n  const [cv, setCv] = useState();\n  const [error, setError] = useState();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"payForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payFormHeader\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Payment Form\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"BAD\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formLabelInput\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: e => {\n            setEmail(e.target.value);\n          },\n          type: \"email\",\n          name: \"email\",\n          id: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formLabelInput\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"cardNumber\",\n          children: \"Card Number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: e => {\n            setCardNumber(e.target.value);\n          },\n          type: \"string\",\n          name: \"cardNumber\",\n          id: \"cardNumber\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formLabelInput\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"expireDateOfCard\",\n          children: \"Card Expire Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: e => {\n            setExpireDateOfCard(e.target.value);\n          },\n          type: \"string\",\n          maxLength: 5,\n          name: \"expireDateOfCard\",\n          id: \"expireDateOfCard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formLabelInput\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"cv\",\n          children: \"Card CV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: e => {\n            setCv(e.target.value);\n          },\n          type: \"string\",\n          maxLength: 3,\n          name: \"cv\",\n          id: \"cv\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          e.preventDefault();\n          axios.get(`http://localhost:5000/CheckEmail/${email}`).then(res => {\n            if (res.data.message === \"FOUNDED\") {\n              let numOne = expireDateOfCard.toString().slice(0, 2);\n              let numTwo = expireDateOfCard.toString().slice(3, 5);\n\n              if (!isNaN(numOne) && !isNaN(numTwo) && !isNaN(cv) && !isNaN(cardNumber) && parseInt(numOne) < 31 && parseInt(numOne) > 0 && parseInt(numTwo) < 13 && parseInt(numTwo) > 0 && cv.length === 3) {\n                if (validateCardNumber(cardNumber)) {\n                  axios.get(`http://localhost:5000/UpdateOrder/${orderId}`).then(res => {\n                    if (res.data === \"changed\") {\n                      navigate(\"/ProfilePage\");\n                    } else {\n                      setError(\"Somthing Went Wrong\");\n                    }\n                  });\n                } else {\n                  setError(\"ENTER VALID CARD NUMBER\");\n                }\n              } else {\n                setError(\"ENTER VALID INPUTS\");\n              }\n            } else {\n              setError(\"EMAIL NOT FOUND\");\n            }\n          });\n        },\n        className: \"payFormBTN\",\n        children: \"Pay For Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PayForm, \"hAsPrEa1VdOSNGf4KwvUR6WqCms=\", false, function () {\n  return [useNavigate];\n});\n\n_c = PayForm;\nexport default PayForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PayForm\");","map":{"version":3,"names":["React","useEffect","useState","useContext","UserContext","axios","useNavigate","PayForm","navigate","orderId","validateCardNumber","number","regex","RegExp","test","luhnCheck","val","checksum","j","i","length","calc","Number","charAt","email","setEmail","cardNumber","setCardNumber","expireDateOfCard","setExpireDateOfCard","cv","setCv","error","setError","e","target","value","preventDefault","get","then","res","data","message","numOne","toString","slice","numTwo","isNaN","parseInt"],"sources":["C:/Users/Fidlo/Desktop/ecomerence/frontend/src/components/PayForm.js"],"sourcesContent":["\r\nimport React, { useEffect, useState,useContext } from 'react'\r\nimport { UserContext } from '../Context/UserContext'\r\nimport axios from 'axios'   \r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nfunction PayForm() {\r\n    const navigate = useNavigate()\r\n    const { orderId} = useContext(UserContext)\r\n    const validateCardNumber = number => {\r\n        //Check if the number contains only numeric value  \r\n        //and is of between 13 to 19 digits\r\n        const regex = new RegExp(\"^[0-9]{13,19}$\");\r\n        if (!regex.test(number)){\r\n            return false;\r\n        }\r\n      \r\n        return luhnCheck(number);\r\n    }\r\n    \r\n    const luhnCheck = val => {\r\n        let checksum = 0; // running checksum total\r\n        let j = 1; // takes value of 1 or 2\r\n    \r\n        // Process each digit one by one starting from the last\r\n        for (let i = val.length - 1; i >= 0; i--) {\r\n          let calc = 0;\r\n          // Extract the next digit and multiply by 1 or 2 on alternative digits.\r\n          calc = Number(val.charAt(i)) * j;\r\n    \r\n          // If the result is in two digits add 1 to the checksum total\r\n          if (calc > 9) {\r\n            checksum = checksum + 1;\r\n            calc = calc - 10;\r\n          }\r\n    \r\n          // Add the units element to the checksum total\r\n          checksum = checksum + calc;\r\n    \r\n          // Switch the value of j\r\n          if (j == 1) {\r\n            j = 2;\r\n          } else {\r\n            j = 1;\r\n          }\r\n        }\r\n      \r\n        //Check if it is divisible by 10 or not.\r\n        return (checksum % 10) == 0;\r\n    }\r\n\r\n    const [email,setEmail] = useState()\r\nconst[cardNumber,setCardNumber] = useState()\r\nconst [expireDateOfCard,setExpireDateOfCard] = useState()\r\nconst [cv,setCv] = useState()\r\nconst[error,setError] = useState()\r\n  return (\r\n    <div>\r\n        \r\n    <form className='payForm'>\r\n<div className='payFormHeader'>\r\n    <h1>Payment Form</h1>\r\n    <h2 className='BAD'>{error}</h2>\r\n    </div>\r\n    <div  className='formLabelInput'>\r\n    <label for=\"email\">Email</label>\r\n    <input onChange={(e)=>{\r\n        setEmail(e.target.value)\r\n    }} type=\"email\" name=\"email\" id=\"email\"></input>\r\n   </div>\r\n   <div  className='formLabelInput'>\r\n    <label for=\"cardNumber\">Card Number</label>\r\n    <input  onChange={(e)=>{\r\n        setCardNumber(e.target.value)\r\n    }}type=\"string\" name=\"cardNumber\" id=\"cardNumber\"></input>\r\n   </div>\r\n   <div  className='formLabelInput'>\r\n    <label for=\"expireDateOfCard\">Card Expire Date</label>\r\n    <input onChange={(e)=>{\r\n        setExpireDateOfCard(e.target.value)\r\n    }} type=\"string\" maxLength={5} name=\"expireDateOfCard\" id=\"expireDateOfCard\"></input>\r\n   </div>\r\n   <div  className='formLabelInput'>\r\n    <label for=\"cv\">Card CV</label>\r\n    <input onChange={(e)=>{\r\n        setCv(e.target.value)\r\n    }} type=\"string\" maxLength={3} name=\"cv\" id=\"cv\"></input>\r\n   </div>\r\n        <button \r\n        onClick={(e)=>{\r\n            e.preventDefault()\r\n            axios.get(`http://localhost:5000/CheckEmail/${email}`).then((res)=>{\r\n                \r\n                if(res.data.message === \"FOUNDED\" ){\r\n                let numOne = expireDateOfCard.toString().slice(0,2)\r\n                let numTwo = expireDateOfCard.toString().slice(3,5)\r\n                  \r\n                        if(!isNaN(numOne) && !isNaN(numTwo) && !isNaN(cv)   && !isNaN(cardNumber) && parseInt(numOne) <  31 &&parseInt(numOne) >  0&& parseInt(numTwo) <  13 &&parseInt(numTwo) >  0 && cv.length === 3  ) {\r\n                       \r\n                            if(validateCardNumber(cardNumber)){\r\n                      \r\n                                axios.get(`http://localhost:5000/UpdateOrder/${orderId}`).then((res)=>{\r\n\r\n                                    if(res.data ===\"changed\"){\r\n                                        navigate(\"/ProfilePage\")\r\n\r\n                                    }else{\r\n                                        setError(\"Somthing Went Wrong\")\r\n                                    }\r\n\r\n                                 \r\n                            })\r\n\r\n                            }else{\r\n                                setError(\"ENTER VALID CARD NUMBER\")\r\n                            }\r\n\r\n                        }  else{\r\n                            setError(\"ENTER VALID INPUTS\")\r\n                        }        \r\n                \r\n\r\n                  \r\n\r\n                }else{\r\n                    setError(\"EMAIL NOT FOUND\")\r\n                }\r\n            })\r\n        \r\n        }}className='payFormBTN'>Pay For Order</button>\r\n    </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PayForm"],"mappings":";;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAoCC,UAApC,QAAsD,OAAtD;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,kBAA5B;;;AAEA,SAASC,OAAT,GAAmB;EAAA;;EACf,MAAMC,QAAQ,GAAGF,WAAW,EAA5B;EACA,MAAM;IAAEG;EAAF,IAAaN,UAAU,CAACC,WAAD,CAA7B;;EACA,MAAMM,kBAAkB,GAAGC,MAAM,IAAI;IACjC;IACA;IACA,MAAMC,KAAK,GAAG,IAAIC,MAAJ,CAAW,gBAAX,CAAd;;IACA,IAAI,CAACD,KAAK,CAACE,IAAN,CAAWH,MAAX,CAAL,EAAwB;MACpB,OAAO,KAAP;IACH;;IAED,OAAOI,SAAS,CAACJ,MAAD,CAAhB;EACH,CATD;;EAWA,MAAMI,SAAS,GAAGC,GAAG,IAAI;IACrB,IAAIC,QAAQ,GAAG,CAAf,CADqB,CACH;;IAClB,IAAIC,CAAC,GAAG,CAAR,CAFqB,CAEV;IAEX;;IACA,KAAK,IAAIC,CAAC,GAAGH,GAAG,CAACI,MAAJ,GAAa,CAA1B,EAA6BD,CAAC,IAAI,CAAlC,EAAqCA,CAAC,EAAtC,EAA0C;MACxC,IAAIE,IAAI,GAAG,CAAX,CADwC,CAExC;;MACAA,IAAI,GAAGC,MAAM,CAACN,GAAG,CAACO,MAAJ,CAAWJ,CAAX,CAAD,CAAN,GAAwBD,CAA/B,CAHwC,CAKxC;;MACA,IAAIG,IAAI,GAAG,CAAX,EAAc;QACZJ,QAAQ,GAAGA,QAAQ,GAAG,CAAtB;QACAI,IAAI,GAAGA,IAAI,GAAG,EAAd;MACD,CATuC,CAWxC;;;MACAJ,QAAQ,GAAGA,QAAQ,GAAGI,IAAtB,CAZwC,CAcxC;;MACA,IAAIH,CAAC,IAAI,CAAT,EAAY;QACVA,CAAC,GAAG,CAAJ;MACD,CAFD,MAEO;QACLA,CAAC,GAAG,CAAJ;MACD;IACF,CAzBoB,CA2BrB;;;IACA,OAAQD,QAAQ,GAAG,EAAZ,IAAmB,CAA1B;EACH,CA7BD;;EA+BA,MAAM,CAACO,KAAD,EAAOC,QAAP,IAAmBvB,QAAQ,EAAjC;EACJ,MAAK,CAACwB,UAAD,EAAYC,aAAZ,IAA6BzB,QAAQ,EAA1C;EACA,MAAM,CAAC0B,gBAAD,EAAkBC,mBAAlB,IAAyC3B,QAAQ,EAAvD;EACA,MAAM,CAAC4B,EAAD,EAAIC,KAAJ,IAAa7B,QAAQ,EAA3B;EACA,MAAK,CAAC8B,KAAD,EAAOC,QAAP,IAAmB/B,QAAQ,EAAhC;EACE,oBACE;IAAA,uBAEA;MAAM,SAAS,EAAC,SAAhB;MAAA,wBACJ;QAAK,SAAS,EAAC,eAAf;QAAA,wBACI;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADJ,eAEI;UAAI,SAAS,EAAC,KAAd;UAAA,UAAqB8B;QAArB;UAAA;UAAA;UAAA;QAAA,QAFJ;MAAA;QAAA;QAAA;QAAA;MAAA,QADI,eAKA;QAAM,SAAS,EAAC,gBAAhB;QAAA,wBACA;UAAO,GAAG,EAAC,OAAX;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADA,eAEA;UAAO,QAAQ,EAAGE,CAAD,IAAK;YAClBT,QAAQ,CAACS,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR;UACH,CAFD;UAEG,IAAI,EAAC,OAFR;UAEgB,IAAI,EAAC,OAFrB;UAE6B,EAAE,EAAC;QAFhC;UAAA;UAAA;UAAA;QAAA,QAFA;MAAA;QAAA;QAAA;QAAA;MAAA,QALA,eAWD;QAAM,SAAS,EAAC,gBAAhB;QAAA,wBACC;UAAO,GAAG,EAAC,YAAX;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADD,eAEC;UAAQ,QAAQ,EAAGF,CAAD,IAAK;YACnBP,aAAa,CAACO,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb;UACH,CAFD;UAEE,IAAI,EAAC,QAFP;UAEgB,IAAI,EAAC,YAFrB;UAEkC,EAAE,EAAC;QAFrC;UAAA;UAAA;UAAA;QAAA,QAFD;MAAA;QAAA;QAAA;QAAA;MAAA,QAXC,eAiBD;QAAM,SAAS,EAAC,gBAAhB;QAAA,wBACC;UAAO,GAAG,EAAC,kBAAX;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADD,eAEC;UAAO,QAAQ,EAAGF,CAAD,IAAK;YAClBL,mBAAmB,CAACK,CAAC,CAACC,MAAF,CAASC,KAAV,CAAnB;UACH,CAFD;UAEG,IAAI,EAAC,QAFR;UAEiB,SAAS,EAAE,CAF5B;UAE+B,IAAI,EAAC,kBAFpC;UAEuD,EAAE,EAAC;QAF1D;UAAA;UAAA;UAAA;QAAA,QAFD;MAAA;QAAA;QAAA;QAAA;MAAA,QAjBC,eAuBD;QAAM,SAAS,EAAC,gBAAhB;QAAA,wBACC;UAAO,GAAG,EAAC,IAAX;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADD,eAEC;UAAO,QAAQ,EAAGF,CAAD,IAAK;YAClBH,KAAK,CAACG,CAAC,CAACC,MAAF,CAASC,KAAV,CAAL;UACH,CAFD;UAEG,IAAI,EAAC,QAFR;UAEiB,SAAS,EAAE,CAF5B;UAE+B,IAAI,EAAC,IAFpC;UAEyC,EAAE,EAAC;QAF5C;UAAA;UAAA;UAAA;QAAA,QAFD;MAAA;QAAA;QAAA;QAAA;MAAA,QAvBC,eA6BI;QACA,OAAO,EAAGF,CAAD,IAAK;UACVA,CAAC,CAACG,cAAF;UACAhC,KAAK,CAACiC,GAAN,CAAW,oCAAmCd,KAAM,EAApD,EAAuDe,IAAvD,CAA6DC,GAAD,IAAO;YAE/D,IAAGA,GAAG,CAACC,IAAJ,CAASC,OAAT,KAAqB,SAAxB,EAAmC;cACnC,IAAIC,MAAM,GAAGf,gBAAgB,CAACgB,QAAjB,GAA4BC,KAA5B,CAAkC,CAAlC,EAAoC,CAApC,CAAb;cACA,IAAIC,MAAM,GAAGlB,gBAAgB,CAACgB,QAAjB,GAA4BC,KAA5B,CAAkC,CAAlC,EAAoC,CAApC,CAAb;;cAEQ,IAAG,CAACE,KAAK,CAACJ,MAAD,CAAN,IAAkB,CAACI,KAAK,CAACD,MAAD,CAAxB,IAAoC,CAACC,KAAK,CAACjB,EAAD,CAA1C,IAAoD,CAACiB,KAAK,CAACrB,UAAD,CAA1D,IAA0EsB,QAAQ,CAACL,MAAD,CAAR,GAAoB,EAA9F,IAAmGK,QAAQ,CAACL,MAAD,CAAR,GAAoB,CAAvH,IAA2HK,QAAQ,CAACF,MAAD,CAAR,GAAoB,EAA/I,IAAoJE,QAAQ,CAACF,MAAD,CAAR,GAAoB,CAAxK,IAA6KhB,EAAE,CAACV,MAAH,KAAc,CAA9L,EAAmM;gBAE/L,IAAGV,kBAAkB,CAACgB,UAAD,CAArB,EAAkC;kBAE9BrB,KAAK,CAACiC,GAAN,CAAW,qCAAoC7B,OAAQ,EAAvD,EAA0D8B,IAA1D,CAAgEC,GAAD,IAAO;oBAElE,IAAGA,GAAG,CAACC,IAAJ,KAAY,SAAf,EAAyB;sBACrBjC,QAAQ,CAAC,cAAD,CAAR;oBAEH,CAHD,MAGK;sBACDyB,QAAQ,CAAC,qBAAD,CAAR;oBACH;kBAGR,CAVG;gBAYH,CAdD,MAcK;kBACDA,QAAQ,CAAC,yBAAD,CAAR;gBACH;cAEJ,CApBD,MAoBO;gBACHA,QAAQ,CAAC,oBAAD,CAAR;cACH;YAKR,CA/BD,MA+BK;cACDA,QAAQ,CAAC,iBAAD,CAAR;YACH;UACJ,CApCD;QAsCH,CAzCD;QAyCE,SAAS,EAAC,YAzCZ;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QA7BJ;IAAA;MAAA;MAAA;MAAA;IAAA;EAFA;IAAA;IAAA;IAAA;EAAA,QADF;AA6ED;;GA/HQ1B,O;UACYD,W;;;KADZC,O;AAiIT,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}